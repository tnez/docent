# Journal - 2025-10-29

## What I did

Fixed critical path handling bug in `/docent:ask` tool that prevented searching journals and notes.

## What I learned

**Path resolution gotcha:** Docent's config system resolves search paths to absolute paths, but downstream code must not join them with `projectPath` again.

The bug was in `src/mcp/tools/ask.ts` lines 153-168. Config had already resolved paths to absolute (e.g., `/Users/tnez/Code/tnez/docent/.docent`), but the search code was joining them with `projectPath` again, creating invalid doubled paths like `/Users/tnez/Code/tnez/docent/Users/tnez/Code/tnez/docent/.docent`.

**Fix:** Use absolute paths from config directly without additional joining.

**Lesson:** Always verify assumptions about path resolution at each layer when mixing absolute and relative paths. Document whether functions expect/return absolute vs relative paths.

## What's next

- Test search functionality thoroughly
- Consider adding path resolution documentation to codebase
- Watch for similar path handling issues in other tools

## Questions/Blockers

None - bug is resolved and verified working.

# Session 2025-10-28-001

**Started:** 2025-10-28T22:30:00Z

---

## 2025-10-28T22:30:00Z

**Summary:** Implemented foundation for docent 2.0 architecture with resource registry and /docent:start command

**Key Discoveries:**

- Resource registry pattern works well - loads bundled templates/runbooks with user override support
- YAML frontmatter provides clean metadata format for both templates and runbooks
- Directory structure (runbooks/ and templates/ at package root, .docent/ for project-specific) mirrors user experience
- Simple YAML parser sufficient for config needs - no external dependency required
- **CRITICAL INSIGHT: Docent should be DECLARATIVE, not imperative**
  - When agent calls /docent:act, docent provides instructions/runbook → agent executes (possibly via subagent)
  - When agent calls /docent:tell, docent researches + provides clear instructions → agent writes docs (possibly via subagent)
  - Docent is a **coordinator** that prepares context and instructions, not an executor
  - This aligns with agent-first architecture - let agents do what they do best
  - Example: /docent:act bootstrap should return "Here's the bootstrap runbook, please execute these procedures" not execute commands itself
- /docent:start provides session initialization and resource discovery - good first touchpoint for agents
- Extended config system supports new .docent/config.yaml format with search_paths and projects
- TypeScript __dirname works better than import.meta.url for package path resolution
- Bundled runbooks (bootstrap, health-check, file-issue, code-review, ci-health-check) capture operational knowledge in LLM-consumable format

**Implementation Completed:**

- Created 5 bundled runbooks at /runbooks/ with YAML frontmatter
- Created ResourceRegistry class for loading templates/runbooks with user override support
- Extended config.ts to parse .docent/config.yaml with search_paths and projects
- Implemented /docent:start MCP tool - lists available resources and provides usage instructions
- Updated package.json to ship runbooks/ in npm package
- Moved project-specific runbooks to .docent/runbooks/ for docent project internal use
- Commit c06298b created with all changes

**Next Steps:**

- Implement /docent:act as **prompt generator** - returns runbook content + execution instructions for agent
  - Should format runbook markdown for agent consumption
  - May include: "Please execute these steps using appropriate subagents"
  - Let agent decide how to execute (directly or via subagents)
- Implement /docent:ask as **context gatherer** - searches docs, formats results for agent to synthesize answer
  - Search configured paths (from config.yaml search_paths)
  - Return relevant documentation chunks
  - Let agent synthesize the answer from gathered context
- Implement /docent:tell as **research + instruction generator** - determines what to write where, instructs agent on edits
  - Research: where should this information go? (existing doc vs new file)
  - Generate: clear instructions for what to write/update
  - Let agent make the actual file edits (possibly via subagent)
- Build semantic router to interpret natural language directives and route to handlers
- Test declarative flow: docent prepares context → agent executes → validate results
- Release as docent 1.0.0-beta when ask/act/tell provide useful agent-executable instructions

**Open Questions:**

- Should /docent:act return raw runbook markdown or add execution guidance wrapper?
- How much context should /docent:ask gather before returning? (all matches vs top N)
- Should /docent:tell determine exact file/line or provide options for agent to choose from?
- Do we need explicit "use subagent" hints in responses or let agent autonomously decide?
- Should responses include tool suggestions (e.g., "consider using Edit tool for this change")?

---

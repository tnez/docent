{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://docket.dev/schemas/audit.json",
  "title": "Docket Documentation Audit",
  "description": "Schema for docket audit command output",
  "type": "object",
  "required": ["score", "gaps", "coverage", "recommendations", "timestamp"],
  "properties": {
    "score": {
      "type": "integer",
      "minimum": 0,
      "maximum": 100,
      "description": "Overall documentation completeness score"
    },
    "gaps": {
      "type": "array",
      "description": "Identified documentation gaps",
      "items": {
        "type": "object",
        "required": ["category", "severity", "description", "suggestion"],
        "properties": {
          "category": {
            "type": "string",
            "description": "Gap category",
            "examples": ["Architecture", "Decisions", "Standards", "Testing", "API", "Operations", "Onboarding", "Content", "Format"]
          },
          "severity": {
            "type": "string",
            "enum": ["high", "medium", "low"],
            "description": "Priority level of this gap"
          },
          "description": {
            "type": "string",
            "description": "What is missing or incomplete"
          },
          "suggestion": {
            "type": "string",
            "description": "Recommended action to address this gap"
          },
          "files": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "Related files (if applicable)"
          }
        }
      }
    },
    "coverage": {
      "type": "object",
      "description": "Documentation coverage flags",
      "required": ["hasArchitecture", "hasADRs", "hasStandards", "hasTesting", "hasOnboarding", "hasAPI", "hasTroubleshooting"],
      "properties": {
        "hasArchitecture": {
          "type": "boolean",
          "description": "Architecture documentation exists"
        },
        "hasADRs": {
          "type": "boolean",
          "description": "Architecture Decision Records exist"
        },
        "hasStandards": {
          "type": "boolean",
          "description": "Coding standards documentation exists"
        },
        "hasTesting": {
          "type": "boolean",
          "description": "Testing documentation exists"
        },
        "hasOnboarding": {
          "type": "boolean",
          "description": "Onboarding documentation exists"
        },
        "hasAPI": {
          "type": "boolean",
          "description": "API documentation exists"
        },
        "hasTroubleshooting": {
          "type": "boolean",
          "description": "Troubleshooting/runbook documentation exists"
        }
      }
    },
    "recommendations": {
      "type": "array",
      "description": "Prioritized recommendations for improving documentation",
      "items": {
        "type": "string"
      }
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "ISO 8601 timestamp of when audit was performed"
    }
  },
  "examples": [
    {
      "score": 75,
      "gaps": [
        {
          "category": "Decisions",
          "severity": "high",
          "description": "No Architecture Decision Records (ADRs) found",
          "suggestion": "Document key technology choices and design decisions using ADRs"
        },
        {
          "category": "Content",
          "severity": "medium",
          "description": "11 documentation files are empty or contain only placeholders",
          "suggestion": "Fill in these documentation files with actual content",
          "files": ["testing-template.md", "standards-template.md"]
        }
      ],
      "coverage": {
        "hasArchitecture": true,
        "hasADRs": false,
        "hasStandards": true,
        "hasTesting": true,
        "hasOnboarding": true,
        "hasAPI": true,
        "hasTroubleshooting": true
      },
      "recommendations": [
        "Address 1 high-priority documentation gaps first",
        "Begin tracking architectural decisions with ADRs"
      ],
      "timestamp": "2025-10-11T19:00:00.000Z"
    }
  ]
}
